{"version":3,"sources":["components/shop-header/index.js","components/shop-header/shop-header.js","components/spinner/index.js","components/spinner/spinner.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/book-list/index.js","components/book-list/book-list.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","containers/book-list-container.js","components/pages/home-page.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundary/index.js","components/error-boundary/error-boundary.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","connect","shoppingCart","numItems","cartItems","total","orderTotal","className","to","length","Spinner","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","BookList","books","map","key","id","ErrorIndicator","style","textAlign","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","funcs","comp","reduceRight","wrapped","f","BookListContainer","this","loading","error","Component","bookList","HomePage","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","items","item","idx","count","CartPage","App","role","exact","path","component","ErrorBoundary","state","hasError","setState","children","BookstoreService","Promise","resolve","setTimeout","updateBookList","action","undefined","updateCartItems","slice","updateOrderTotal","quantity","updateOrder","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.8d128c31.chunk.js","sourcesContent":["import ShopHeader from './shop-header';\n\nexport default ShopHeader;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport './shop-header.css';\n\nconst ShopHeader = ({ numItems, total }) => {\n  return (\n    <header className='shop-header row'>\n      <Link to='/' className='logo text-dark'>\n        ReStore\n      </Link>\n      <Link to='/cart' className='shopping-cart'>\n        <i className='cart-icon fa fa-shopping-cart' />\n        {numItems.length} items (${total})\n      </Link>\n    </header>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    numItems: cartItems,\n    total: orderTotal\n  };\n};\n\nexport default connect(mapStateToProps)(ShopHeader);\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\n\nconst Spinner = () => {\n  return <div>loading...</div>;\n};\n\nexport default Spinner;\n","import BookListItem from './book-list-item';\n\nexport default BookListItem;\n","import React from 'react';\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className='book-list-item'>\n      <div className='book-cover'>\n        <img src={coverImage} alt='cover' />\n      </div>\n      <div className='book-details'>\n        <span className='book-title'>{title}</span>\n        <div className='book-author'>{author}</div>\n        <div className='book-price'>${price}</div>\n        <button onClick={onAddedToCart} className='btn btn-info add-to-cart'>\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import BookList from './book-list';\n\nexport default BookList;\n","import React from 'react';\nimport BookListItem from '../book-list-item';\n\nimport './book-list.css';\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className='book-list'>\n      {books.map(book => (\n        <li key={book.id}>\n          <BookListItem\n            book={book}\n            onAddedToCart={() => onAddedToCart(book.id)}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default BookList;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\n\nconst ErrorIndicator = () => {\n  return <div style={{ textAlign: 'center' }}>Error</div>;\n};\n\nexport default ErrorIndicator;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => Wrapped => {\n  return props => {\n    return (\n      <BookstoreServiceConsumer>\n        {bookstoreService => (\n          <Wrapped {...props} bookstoreService={bookstoreService} />\n        )}\n      </BookstoreServiceConsumer>\n    );\n  };\n};\n\nexport default withBookstoreService;\n","const booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST'\n  };\n};\n\nconst booksLoaded = newBooks => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks\n  };\n};\n\nconst booksError = error => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error\n  };\n};\n\nexport const bookAddedToCart = bookId => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  };\n};\n\nexport const bookRemovedFromCart = bookId => {\n  return {\n    type: 'BOOK_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\n\nexport const allBooksRemovedFromCart = bookId => {\n  return {\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\n\nexport const fetchBooks = (bookstoreService, dispatch) => () => {\n  dispatch(booksRequested());\n  bookstoreService\n    .getBooks()\n    .then(data => dispatch(booksLoaded(data)))\n    .catch(err => dispatch(booksError(err)));\n};\n","const compose = (...funcs) => comp => {\n  return funcs.reduceRight((wrapped, f) => f(wrapped), comp);\n};\n\nexport default compose;\n","import React, { Component } from 'react';\nimport Spinner from '../components/spinner';\nimport BookList from '../components/book-list';\nimport ErrorIndicator from '../components/error-indicator';\nimport { connect } from 'react-redux';\nimport { withBookstoreService } from '../components/hoc';\nimport { fetchBooks, bookAddedToCart } from '../actions';\nimport { compose } from '../utils';\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (loading) {\n      return <Spinner />;\n    }\n\n    if (error) {\n      return <ErrorIndicator />;\n    }\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\n  }\n}\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return {\n    fetchBooks: fetchBooks(bookstoreService, dispatch),\n    onAddedToCart: id => dispatch(bookAddedToCart(id))\n  };\n};\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);\n","import React from 'react';\nimport BookListContainer from '../../containers/book-list-container';\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookListContainer />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport './shopping-cart-table.css';\nimport {\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart\n} from '../../actions';\n\nconst ShoppingCartTable = ({\n  items,\n  total,\n  onIncrease,\n  onDecrease,\n  onDelete\n}) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total}</td>\n        <td>\n          <button\n            onClick={() => onDecrease(id)}\n            className='btn btn-outline-warning btn-small'\n          >\n            <i className='fa fa-minus-circle' />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className='btn btn-outline-success btn-small'\n          >\n            <i className='fa fa-plus-circle' />\n          </button>\n          <button\n            onClick={() => onDelete(id)}\n            className='btn btn-outline-danger btn-small'\n          >\n            <i className='fa fa-trash-o' />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className='shopping-cart-table'>\n      <h2>Your Order</h2>\n      <table className='table'>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>{items.map(renderRow)}</tbody>\n      </table>\n      <div className='total'>Total: ${total}</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal\n  };\n};\n\nconst mapDispatchToProps = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookRemovedFromCart,\n  onDelete: allBooksRemovedFromCart\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import React from 'react';\nimport ShoppingCartTable from '../shopping-cart-table';\n\nconst CartPage = () => {\n  return (\n    <div>\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default CartPage;\n","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport ShopHeader from '../shop-header';\nimport { Route, Switch } from 'react-router-dom';\nimport { HomePage, CartPage } from '../pages';\n\nconst App = () => {\n  return (\n    <main role='main' className='container'>\n      <ShopHeader />\n      <Switch>\n        <Route exact path='/' component={HomePage} />\n        <Route path='/cart' component={CartPage} />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import ErrorBoundary from './error-boundary';\n\nexport default ErrorBoundary;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundary extends Component {\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    const { hasError } = this.state;\n    return hasError ? <ErrorIndicator /> : this.props.children;\n  }\n}\n","export default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: `JavaScript: The Good Parts`,\n      author: 'Douglas Crockford',\n      price: 19,\n      coverImage:\n        'https://d1w7fb2mkkr3kw.cloudfront.net/assets/images/book/lrg/9780/5965/9780596517748.jpg'\n    },\n    {\n      id: 2,\n      title: `JavaScript: The Definitive Guide`,\n      author: 'David Flanagan',\n      price: 68,\n      coverImage: 'https://cdn1.ozone.ru/multimedia/c650/1003130699.jpg'\n    }\n  ];\n\n  getBooks() {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        resolve(this.data);\n      }, 700);\n    });\n  }\n}\n","const updateBookList = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    };\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n    default:\n      return state.bookList;\n  }\n};\n\nexport default updateBookList;\n","const updateCartItem = (book, item = {}, quantity) => {\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\n\nconst updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  }\n\n  if (idx === -1) {\n    return [...cartItems, item];\n  } else {\n    return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n  }\n};\n\nconst updateOrderTotal = (orderTotal, book, quantity) => {\n  return orderTotal + quantity * book.price;\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const {\n    bookList: { books },\n    shoppingCart: { cartItems, orderTotal }\n  } = state;\n  const book = books.find(book => book.id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n  const newItem = updateCartItem(book, item, quantity);\n\n  return {\n    orderTotal: updateOrderTotal(orderTotal, book, quantity),\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      orderTotal: 0,\n      cartItems: []\n    };\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(\n        ({ id }) => id === action.payload\n      );\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n","import updateBookList from './book-list';\nimport updateShoppingCart from './shopping-cart';\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  };\n};\n\nexport default reducer;\n","import { createStore } from 'redux';\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundary from './components/error-boundary';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundary>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundary>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}